<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administração de Notícias</title>
    <meta name="description" content="Área de administração para adicionar, editar e excluir notícias. Apenas acessível para administradores.">
    <meta name="keywords" content="administração de notícias, gerenciamento de conteúdo, edição de notícias">
    <meta name="robots" content="noindex, nofollow">
    <meta property="og:title" content="Administração de Notícias">
    <meta property="og:description" content="Área de administração para adicionar, editar e excluir notícias. Exclusivo para administradores.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://example.com/admin">
    <meta property="og:image" content="https://example.com/admin-thumbnail.jpg">
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <header>
        <h1>Administração de Notícias</h1>
    </header>
    <main>
        <form id="news-form">
            <input type="hidden" id="edit-id" name="edit-id">
            <label for="title">Título:</label>
            <input type="text" id="title" name="title" required>
            
            <label for="image">Imagem URL:</label>
            <input type="text" id="image" name="image">
            
            <label for="text">Texto da Notícia:</label>
            <textarea id="text" name="text" rows="10" required></textarea>
            
            <label for="video">URL do Vídeo:</label>
            <input type="text" id="video" name="video">
            
            <label for="tags">Tags (separadas por vírgula):</label>
            <input type="text" id="tags" name="tags">
            
            <button type="submit">Salvar Notícia</button>
        </form>
        <hr>
        <h2>Lista de Notícias</h2>
        <ul id="news-list">
            <!-- A lista de notícias será inserida aqui pelo JavaScript -->
        </ul>
    </main>
    <script>
        function loadNews() {
            const newsArray = JSON.parse(localStorage.getItem('news')) || [];
            const newsList = document.getElementById('news-list');
            newsList.innerHTML = '';
            
            newsArray.forEach((newsItem, index) => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
                    <h3>${newsItem.title}</h3>
                    ${newsItem.image ? `<img src="${newsItem.image}" alt="Imagem da notícia" style="max-width: 100px;">` : ''}
                    <p>${newsItem.text}</p>
                    ${newsItem.video ? `<video controls style="max-width: 200px;"><source src="${newsItem.video}" type="video/mp4">Seu navegador não suporta o elemento de vídeo.</video>` : ''}
                    ${newsItem.tags ? `<p><strong>Tags:</strong> ${newsItem.tags.join(', ')}</p>` : ''}
                    <button onclick="editNews(${index})">Editar</button>
                    <button onclick="deleteNews(${index})">Excluir</button>
                `;
                newsList.appendChild(listItem);
            });
        }
        
        function editNews(index) {
            const newsArray = JSON.parse(localStorage.getItem('news')) || [];
            const newsItem = newsArray[index];
            document.getElementById('edit-id').value = index;
            document.getElementById('title').value = newsItem.title;
            document.getElementById('image').value = newsItem.image;
            document.getElementById('text').value = newsItem.text;
            document.getElementById('video').value = newsItem.video;
            document.getElementById('tags').value = newsItem.tags ? newsItem.tags.join(', ') : '';
        }

        function deleteNews(index) {
            if (confirm('Você tem certeza de que deseja excluir esta notícia?')) {
                let newsArray = JSON.parse(localStorage.getItem('news')) || [];
                newsArray.splice(index, 1); // Remove o item da lista
                localStorage.setItem('news', JSON.stringify(newsArray));
                loadNews(); // Atualiza a lista de notícias
            }
        }

        document.getElementById('news-form').addEventListener('submit', function(event) {
            event.preventDefault();

            const index = document.getElementById('edit-id').value;
            const title = document.getElementById('title').value;
            const image = document.getElementById('image').value;
            const text = document.getElementById('text').value;
            const video = document.getElementById('video').value;
            const tags = document.getElementById('tags').value.split(',').map(tag => tag.trim()).filter(tag => tag.length > 0);

            const newsItem = {
                title,
                image,
                text,
                video,
                tags,
                date: new Date().toISOString()
            };

            let newsArray = JSON.parse(localStorage.getItem('news')) || [];
            if (index === '') {
                // Adiciona nova notícia
                newsArray.push(newsItem);
            } else {
                // Atualiza notícia existente
                newsArray[parseInt(index)] = newsItem;
            }
            localStorage.setItem('news', JSON.stringify(newsArray));
            document.getElementById('news-form').reset();
            document.getElementById('edit-id').value = '';
            loadNews();
        });

        document.addEventListener('DOMContentLoaded', loadNews);
    </script>
</body>
</html>
